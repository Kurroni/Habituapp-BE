(this["webpackJsonpreact-auth-client-done-v2"]=this["webpackJsonpreact-auth-client-done-v2"]||[]).push([[0],{34:function(e,t,n){e.exports=n(61)},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(31),l=n.n(i),o=n(1),u=n(2),c=n(4),s=n(3),h=n(5),m=n(14),p=n(12),g=n(8),d=n(13),b=n.n(d),f=new(function(){function e(){Object(o.a)(this,e),this.auth=b.a.create({baseURL:"https://habitu-app.herokuapp.com",withCredentials:!0})}return Object(u.a)(e,[{key:"signup",value:function(e){var t=e.username,n=e.email,a=e.password;return this.auth.post("/auth/signup",{username:t,email:n,password:a}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.username,n=e.email,a=e.password;return this.auth.post("/auth/login",{username:t,email:n,password:a}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),v=r.a.createContext(),E=v.Consumer,O=v.Provider,j=function(e){return function(t){function n(){return Object(o.a)(this,n),Object(c.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(h.a)(n,t),Object(u.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(E,null,(function(n){var a=n.login,i=n.signup,l=n.user,o=n.logout,u=n.isLoggedin,c=n.isLoading;return r.a.createElement(e,Object.assign({login:a,signup:i,user:l,logout:o,isLoggedin:u,isLoading:c},t.props))}))}}]),n}(r.a.Component)},y=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedin:!1,user:null,isLoading:!0},n.signup=function(e){var t=e.username,a=e.email,r=e.password;f.signup({username:t,email:a,password:r}).then((function(e){return n.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},n.login=function(e){var t=e.username,a=e.password;f.login({username:t,password:a}).then((function(e){return n.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},n.logout=function(){f.logout().then((function(){return n.setState({isLoggedin:!1,user:null})})).catch((function(e){return console.log(e)}))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.me().then((function(t){return e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isLoggedin,a=e.user,i=this.login,l=this.logout,o=this.signup;return r.a.createElement(O,{value:{isLoading:t,isLoggedin:n,user:a,login:i,logout:l,signup:o}},this.props.children)}}]),t}(r.a.Component),C=j(function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.email,i=t.password;n.props.signup({username:a,email:r,password:i})},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",name:"email",value:n,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Signup"})),r.a.createElement("p",null,"Already have account?"),r.a.createElement(g.b,{to:"/login"}," Login"))}}]),t}(a.Component)),w=j(function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.props.login({username:a,password:r})},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login"})),r.a.createElement("p",null,"No account?"),r.a.createElement(g.b,{to:"/signup"}," Sign Up"))}}]),t}(a.Component)),L=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Private Route"))}}]),t}(a.Component),k=j(function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.logout,a=e.isLoggedin;return r.a.createElement("div",{style:{borderRadius:"5px",padding:"20px",background:"#686de0"}},a?r.a.createElement("div",null,r.a.createElement("p",null,"username: ",t.username),r.a.createElement("button",{onClick:n},"Logout")):r.a.createElement("div",null,r.a.createElement(g.b,{to:"/login"}," ",r.a.createElement("button",null,"Login")," "),r.a.createElement("br",null),r.a.createElement(g.b,{to:"/signup"}," ",r.a.createElement("button",null,"Signup")," ")))}}]),t}(a.Component)),S=n(17);var x=j((function(e){var t=e.component,n=e.isLoggedin,a=e.isLoading,i=Object(S.a)(e,["component","isLoggedin","isLoading"]);return a?r.a.createElement("h1",null,"Loading"):r.a.createElement(m.b,Object.assign({},i,{render:function(e){return n?r.a.createElement(m.a,{to:"/private"}):r.a.createElement(t,e)}}))}));var H=j((function(e){var t=e.component,n=e.isLoggedin,a=e.isLoading,i=Object(S.a)(e,["component","isLoggedin","isLoading"]);return a?r.a.createElement("h1",null,"Loading"):r.a.createElement(m.b,Object.assign({},i,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/login"})}}))})),U=new(function(){function e(){Object(o.a)(this,e),this.auth=b.a.create({baseURL:"https://habitu-app.herokuapp.com",withCredentials:!0})}return Object(u.a)(e,[{key:"imageUpload",value:function(e){return this.auth.post("/cloudinary",e).then((function(e){return e.data}))}}]),e}()),D=new(function(){function e(){Object(o.a)(this,e),this.habit=b.a.create({baseURL:"https://habitu-app.herokuapp.com",withCredentials:!0})}return Object(u.a)(e,[{key:"createOne",value:function(e){return this.habit.post("/",e).then((function(e){return e.data}))}},{key:"getOne",value:function(e){return this.habit.get("/:id",e).then((function(e){return e.data}))}},{key:"updateOne",value:function(e,t){return this.habit.put("/:id",t).then((function(e){return e.data}))}}]),e}()),A=new(function(){function e(){Object(o.a)(this,e),this.user=b.a.create({baseURL:"https://habitu-app.herokuapp.com",withCredentials:!0})}return Object(u.a)(e,[{key:"getOne",value:function(e){return this.user.get("/user/".concat(e)).then((function(e){return e.data}))}},{key:"updateTheHabits",value:function(e,t){return this.user.put("/user/".concat(e),{habitsId:t}).then((function(e){var t=e.data;return console.log(t)}))}},{key:"showHabits",value:function(e){return this.user.get("/user/".concat(e)).then((function(e){return e.data}))}}]),e}()),F=j(function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={img:"",title:"",description:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.img,r=t.title,i=t.description;D.createOne({img:a,title:r,description:i}).then((function(e){console.log(e);var t=n.props.user._id;console.log(t),A.updateTheHabits(t,e._id)}))},n.handlePhotoChange=function(e){console.log(e.target.files[0]);var t=e.target.files[0],a=new FormData;a.append("photo",t),U.imageUpload(a).then((function(e){console.log(e),n.setState({img:e})})),console.log(n.state)},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=(t.img,t.title),a=t.description;return r.a.createElement("div",null,r.a.createElement("button",null,"Go back"),r.a.createElement("h1",null,"Create a new habit"),r.a.createElement("img",{style:{width:200,height:"auto"},src:this.state.img,alt:""}),r.a.createElement("form",{onSubmit:this.handleFormSubmit,encType:"multipart/form-data"},r.a.createElement("label",null,"Photo:"),r.a.createElement("input",{type:"file",name:"photo",onChange:function(t){return e.handlePhotoChange(t)}}),r.a.createElement("label",null,"Title:"),r.a.createElement("input",{type:"text",name:"title",value:n,onChange:this.handleChange}),r.a.createElement("label",null,"Description:"),r.a.createElement("input",{type:"text",name:"description",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Create"})))}}]),t}(a.Component)),P=j(function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={listOfHabits:[]},n.getAllHabits=function(){var e=n.props.user._id;A.showHabits(e).then((function(e){console.log("USER",e),n.setState({listOfHabits:e.habits})}))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getAllHabits()}},{key:"render",value:function(){var e=this.state.listOfHabits;return r.a.createElement("div",{className:"habit-list"},e.length?e.map((function(e){return r.a.createElement("div",{key:e._id,className:"habit"},r.a.createElement("img",{src:e.img,alt:""}),r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.description," "))})):r.a.createElement("h3",null,"The list of habits is empty"))}}]),t}(a.Component)),R=j(function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.img,r=t.title,i=t.description;n.props.theHabit._id;D.updateOne({img:a,title:r,description:i}).then((function(e){console.log(e)}))},n.handlePhotoChange=function(e){console.log(e.target.files[0]);var t=e.target.files[0],a=new FormData;a.append("photo",t),U.imageUpload(a).then((function(e){console.log(e),n.setState({img:e})})),console.log(n.state)},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n.state={img:n.props.theHabit.img,title:n.props.theHabit.title,description:n.props.theHabit.description},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state;t.img,t.title,t.description;return r.a.createElement("div",null,r.a.createElement("button",null,"Go back"),r.a.createElement("h1",null,"Edit the habit"),r.a.createElement("img",{style:{width:200,height:"auto"},src:this.state.img,alt:""}),r.a.createElement("form",{onSubmit:this.handleFormSubmit,encType:"multipart/form-data"},r.a.createElement("label",null,"Photo:"),r.a.createElement("input",{type:"file",name:"photo",onChange:function(t){return e.handlePhotoChange(t)}}),r.a.createElement("label",null,"Title:"),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleChange}),r.a.createElement("label",null,"Description:"),r.a.createElement("input",{type:"text",name:"description",value:this.state.description,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Save"})),r.a.createElement("button",null,"Delete habit"))}}]),t}(a.Component)),T=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null),r.a.createElement("h1",null,"Basic React Authentication"),r.a.createElement(m.d,null,r.a.createElement(x,{exact:!0,path:"/signup",component:C}),r.a.createElement(x,{exact:!0,path:"/login",component:w}),r.a.createElement(H,{exact:!0,path:"/private",component:L}),r.a.createElement(H,{exact:!0,path:"/add-habit",component:F}),r.a.createElement(H,{exact:!0,path:"/today",component:P}),r.a.createElement(H,{exact:!0,path:"/edit-habit",component:R})))}}]),t}(a.Component);l.a.render(r.a.createElement(g.a,null,r.a.createElement(y,null,r.a.createElement(T,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.31711a24.chunk.js.map